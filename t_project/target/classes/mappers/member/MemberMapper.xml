<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.woosan.root.mybatis.member.MemberMapper">
	<resultMap type="com.woosan.root.member.dto.MemberDTO" id="member">
	
		 <result property="id" column="id"/>
		<result property="pw" column="pw"/>
		<result property="addr" column="addr"/>
		<result property="name" column="name"/>
		<result property="email" column="email"/>
		<result property="gender" column="gender"/>
		<result property="phNum" column="phNum"/>
		<result property="per_cate" column="per_cate"/>
		<result property="sessionId" column="session_id"/>
		<result property="limitTime" column="limit_time"/>
		</resultMap>
	<select id="logChk" resultMap="member">
		select * from members where id=#{id} and pw=#{pw}
	</select>
	<select id="memberInfo" resultMap="member">
		select * from members
	</select>
	
	<insert id="register">
		insert into members(id, pw, addr,name,email,gender,phNum,per_cate)
			values(#{id},#{pw},#{addr},#{name},#{email},#{gender},#{phNum},#{per_cate})
	</insert>
	<update id="keepLogin">
		update members set session_id=#{s}, 
					limit_time=#{d} where id=#{id}	
	</update>
	
<select id="getSessionId" resultMap="member">
	select * from members where session_id = #{s_id}
</select>
<select id="idCheck" parameterType="String" resultType="int">
	select count(id) from members where id=#{id}
</select>

</mapper>